org "<%= @config_name %>"
infofile "<%= @amanda_dir %>/state/curinfo"
logdir "<%= @amanda_dir %>/state/log"
indexdir "<%= @amanda_dir %>/state/index"
dumpuser "<%= @amanda_user %>"

define changer openstack {
    tpchanger "chg-multi:s3:backups/DailySet/slot-{01,02,03,04,05,06,07,08,09,10}"
    device_property "S3_SUBDOMAIN" "no"
    device_property "S3_SSL" "ON"
    device_property "S3_STORAGE_CLASS" "STANDARD"
    device-property "SSL_CA_INFO" "/etc/amanda/xxxxxxxxx.ca-bundle"
    device-property "S3_HOST" "xxxxxxxxxxxxxxxxxxxxx:443"
    device-property "VERBOSE" "YES"
    device-property "S3_SERVICE_PATH" "/v2.0/tokens"
    device_property "LEOM" "on"
    device-property "STORAGE_API" "SWIFT-2.0"
    device_property "USERNAME" "???"
    device_property "PASSWORD" "????"
    device_property "TENANT_NAME" "???"
    device_property "TENANT_ID" "???"
} 

tpchanger "openstack"
labelstr "<%= @label %>[0-9][0-9]"
autolabel "<%= @label %>%%" EMPTY VOLUME_ERROR
tapecycle 4
dumpcycle 3 days
amrecover_changer "changer"

tapetype "TEST-TAPE"
define tapetype TEST-TAPE {
  length 100 mbytes
  filemark 4 kbytes
}

define dumptype simple-gnutar-local {
    auth "local"
    compress none
    program "GNUTAR"
}

holdingdisk hd1 {
    directory "<%= @amanda_dir %>/holding"
    use 50 mbytes
    chunksize 1 mbyte
}

